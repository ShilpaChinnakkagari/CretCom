{% extends "base.html" %}

{% block title %}HOD Dashboard - CretCom{% endblock %}

{% block navigation %}
    {% if session.user_role == 'hod' %}
        <a href="/hod/dashboard">📊 Dashboard</a>
        <a href="/hod/faculty">👨‍🏫 Faculty</a>
        <a href="/hod/students">🎓 Students</a>
        <a href="/hod/filter-students">🔍 Filter Students</a>
        <a href="/hod/sections">🏫 Sections</a>
        <a href="/hod/ao-management">👨‍💼 AO Management</a>
        <a href="/logout">🚪 Logout</a>
    {% endif %}
{% endblock %}

{% block content %}
<h1>👨‍🏫 HOD Dashboard - {{ department }}</h1>

<!-- Statistics Cards -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
    <div style="background: white; padding: 25px; border-radius: 10px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div style="font-size: 32px; color: #3498db;">👨‍🏫</div>
        <div style="font-size: 24px; font-weight: bold; color: #2c3e50;">{{ faculty_count }}</div>
        <div style="color: #7f8c8d;">Total Faculty</div>
    </div>
    
    <div style="background: white; padding: 25px; border-radius: 10px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div style="font-size: 32px; color: #27ae60;">🎓</div>
        <div style="font-size: 24px; font-weight: bold; color: #2c3e50;">{{ student_count }}</div>
        <div style="color: #7f8c8d;">Total Students</div>
    </div>
    
    <div style="background: white; padding: 25px; border-radius: 10px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div style="font-size: 32px; color: #e74c3c;">📊</div>
        <div style="font-size: 24px; font-weight: bold; color: #2c3e50;">0%</div>
        <div style="color: #7f8c8d;">Attendance Today</div>
    </div>
    
    <div style="background: white; padding: 25px; border-radius: 10px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        <div style="font-size: 32px; color: #f39c12;">✅</div>
        <div style="font-size: 24px; font-weight: bold; color: #2c3e50;">0</div>
        <div style="color: #7f8c8d;">Pending Requests</div>
    </div>
</div>

<!-- Quick Actions -->
<div style="background: white; padding: 25px; border-radius: 10px; margin: 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h3>⚡ Quick Actions</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        <a href="/hod/faculty" style="text-decoration: none;">
            <div style="padding: 20px; background: #3498db; color: white; border-radius: 8px; text-align: center; cursor: pointer;">
                <div style="font-size: 24px;">👨‍🏫</div>
                <div style="font-weight: bold;">Manage Faculty</div>
            </div>
        </a>
        <a href="/hod/students" style="text-decoration: none;">
            <div style="padding: 20px; background: #27ae60; color: white; border-radius: 8px; text-align: center; cursor: pointer;">
                <div style="font-size: 24px;">🎓</div>
                <div style="font-weight: bold;">Manage Students</div>
            </div>
        </a>
        <a href="/hod/ao-management" style="text-decoration: none;">
            <div style="padding: 20px; background: #9b59b6; color: white; border-radius: 8px; text-align: center; cursor: pointer;">
                <div style="font-size: 24px;">👨‍💼</div>
                <div style="font-weight: bold;">Manage AO Staff</div>
            </div>
        </a>
    </div>
</div>

<!-- Recent Faculty -->
<div style="background: white; padding: 25px; border-radius: 10px; margin: 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h3>👨‍🏫 Recent Faculty</h3>
    {% if recent_faculty %}
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
            <thead>
                <tr style="background: #34495e; color: white;">
                    <th style="padding: 12px; text-align: left;">Faculty ID</th>
                    <th style="padding: 12px; text-align: left;">Name</th>
                    <th style="padding: 12px; text-align: left;">Designation</th>
                    <th style="padding: 12px; text-align: left;">Email</th>
                    <th style="padding: 12px; text-align: left;">Phone</th>
                </tr>
            </thead>
            <tbody>
                {% for faculty in recent_faculty %}
                <tr style="border-bottom: 1px solid #ecf0f1;">
                    <td style="padding: 12px;"><strong>{{ faculty.username }}</strong></td>
                    <td style="padding: 12px;">{{ faculty.name }}</td>
                    <td style="padding: 12px;">{{ faculty.designation or 'N/A' }}</td>
                    <td style="padding: 12px;">{{ faculty.email }}</td>
                    <td style="padding: 12px;">{{ faculty.phone or 'N/A' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p style="text-align: center; color: #7f8c8d; padding: 20px;">No faculty members in your department yet.</p>
    {% endif %}
</div>

<!-- Recent Students -->
<div style="background: white; padding: 25px; border-radius: 10px; margin: 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h3>🎓 Recent Students</h3>
    {% if recent_students %}
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
            <thead>
                <tr style="background: #34495e; color: white;">
                    <th style="padding: 12px; text-align: left;">Student ID</th>
                    <th style="padding: 12px; text-align: left;">Name</th>
                    <th style="padding: 12px; text-align: left;">Email</th>
                    <th style="padding: 12px; text-align: left;">Phone</th>
                    <th style="padding: 12px; text-align: left;">Admission Date</th>
                </tr>
            </thead>
            <tbody>
                {% for student in recent_students %}
                <tr style="border-bottom: 1px solid #ecf0f1;">
                    <td style="padding: 12px;"><strong>{{ student.student_id }}</strong></td>
                    <td style="padding: 12px;">{{ student.name }}</td>
                    <td style="padding: 12px;">{{ student.email }}</td>
                    <td style="padding: 12px;">{{ student.phone or 'N/A' }}</td>
                    <td style="padding: 12px;">{{ student.admission_date.strftime('%Y-%m-%d') if student.admission_date else 'N/A' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p style="text-align: center; color: #7f8c8d; padding: 20px;">No students in your department yet.</p>
    {% endif %}
</div>
{% endblock %}